# VPATH and shell configuration
#
top_srcdir     = @top_srcdir@
srcdir         = @srcdir@
VPATH          = @srcdir@
SHELL          = /bin/sh

# location of easel
ESLDIR         = @HMMER_ESLDIR@

# Package information
#
PACKAGE         = @PACKAGE_NAME@
PACKAGE_VERSION = @PACKAGE_VERSION@
PACKAGE_TARNAME = @PACKAGE_TARNAME@

# Installation targets
#
prefix      = @prefix@
exec_prefix = @exec_prefix@
datarootdir = @datarootdir@
bindir      = @bindir@
libdir      = @libdir@
includedir  = @includedir@
mandir      = @mandir@
docdir      = @docdir@
pdfdir      = @pdfdir@
mandir      = @mandir@
man1dir     = ${mandir}/man1
man1ext     = .1

# Compiler configuration
#
CC        = @CC@
CFLAGS    = @CFLAGS@ @PTHREAD_CFLAGS@ @PIC_FLAGS@
LDFLAGS   = -static @LDFLAGS@
SIMDFLAGS = @SIMD_CFLAGS@
CPPFLAGS  = @CPPFLAGS@

# Other tools
#
AR        = @AR@ 
RANLIB    = @RANLIB@
INSTALL   = @INSTALL@


MYLIBDIR = -Lsrc -Llib/hmmer/src -Llib/hmmer/lib/easel 
MYINCDIR = -Isrc -Ilib/hmmer/src -Ilib/hmmer/lib/easel

LIBS     = -lm

MYLIBS   = -lhmmer -leasel 
LFLAGS   = -Lsrc -Llib/hmmer/src -Llib/hmmer/lib/easel 
IFLAGS   = -Isrc -Ilib/hmmer/src -Ilib/hmmer/lib/easel 


# Code manifests
#
PROGS    = src/scorematrix2rate\
	   src/programs/ehmmalign\
	   src/programs/ehmmemit\
	   src/programs/ehmmsearch\
	   src/programs/ehmmscan\
	   src/programs/ephmmer\
	   src/programs/ejackhmmer\
	   src/gappenalties\
	   src/e1sim\
	   src/tkfsim\
	   src/e2msa\
	   src/e2sim\
	   src/e2train\
	   src/pfamsets\
	   src/pfamtrio\
	   src/ptransmark\
	   src/triomsa\
	   src/shorthomset\
	   src/pevomark\
	   src/e2Dickerson\
	   src/e2DickersonSynthetic\
	   src/ehmmDickerson\
	   src/ribosum\
	   src/rscape_priors\
	   src/R-scape\
	   src/R-scape-sim\
	   src/R-scape-sim-nobps\


OBJS     = src/e1_bg.o\
	   src/e1_model.o\
	   src/e1_rate.o\
	   src/e1_emit.o\
	   src/e1_goodness.o\
	   src/e1_simulate.o\
	   src/e2_evolve.o\
           src/e2_generic_decoding.o\
           src/e2_generic_fwdback.o\
           src/e2_generic_optacc.o\
           src/e2_generic_viterbi.o\
           src/e2_generic_vtrace.o\
           src/e2_gmx.o\
           src/e2_msa.o\
	   src/e2_pipeline.o\
           src/e2_profile.o\
           src/e2hmmer_profile.o\
           src/e2_profilesq.o\
           src/e2_trace.o\
           src/e2_train.o\
	   src/e2_tree.o\
           src/e2f_generic_decoding.o\
           src/e2f_generic_fwdback.o\
           src/e2f_generic_optacc.o\
           src/e2fhmmer_generic_decoding.o\
           src/e2fhmmer_generic_fwdback.o\
           src/e2fhmmer_generic_optacc.o\
           src/e2tracealign.o\
           src/branchinference.o\
	   src/cococyk.o\
	   src/covgrammars.o\
	   src/covariation.o\
	   src/cykcov.o\
           src/evohmmer.o\
	   src/evotracealign.o\
           src/fastsp.o\
           src/fetchpfamdb.o\
           src/homology.o\
           src/logsum.o\
           src/minimize.o\
           src/miscellaneous.o\
           src/msatree.o\
           src/mya.o\
           src/msaprobs.o\
           src/msamanip.o\
           src/muscle.o\
	   src/modelconfig.o\
           src/ncbiblast.o\
           src/orthologs.o\
           src/phmmer.o\
           src/plot.o\
           src/p7_evopipeline.o\
           src/etophits_output_tabular.o\
           src/ratematrix.o\
           src/ratebuilder.o\
           src/Dickersonrates.o\
           src/fasta.o\
           src/ssifile.o\
	   src/tkf_model.o\
	   src/tkf_rate.o\
	   src/tkf_simulate.o\
	   src/ribosum_matrix.o\
	   src/cov_simulate.o\


all: libsrc.a ${PROGS} 

${PROGS}: %: %.o ${OBJS}
	${CC} ${MYINCDIR} ${CFLAGS} ${IFLAGS} ${LFLAGS} -o $@ $@.o ${OBJS} ${LIBS} ${MYLIBS} 


.c.o:   
	${CC} ${MYINCDIR} ${IFLAGS} ${LFLAGS} ${CFLAGS} -o $@ -c $<

libsrc.a:  ${OBJS}
	${AR} -r src/libsrc.a $(OBJS) > /dev/null 2>&1
	@${RANLIB} src/libsrc.a


clean:
	-rm -f ${PROGS} ${OBJS} src/libsrc.a *.tab.c *.output src/*.o src/programs/*.o
	-rm -f *~ TAGS
	-rm -f *.gcno *.gcda *.gcov
	-rm -f core.[0-9]*
	-rm -f config.log config.status



################################################################
# @LICENSE@
################################################################
